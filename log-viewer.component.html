<div #tableContainer class="table-container">
  <p-table #logTable [value]="tableData" [columns]="visibleColumns" [totalRecords]="totalRecords" dataKey="_id"
    [paginator]="true" [rows]="dynamicrows()" [scrollable]="true" scrollHeight="flex" >


    <ng-template pTemplate="header" let-columns>
      <tr class="header-row">
        @for(col of columns; track col.id) {
        <th style="width: 10px;">{{ col.displayName }}</th>
        }
      </tr>

      <tr class="filter-row">
        @for(col of columns; track col.id) {
        <th>
          @if(col.enableFiltering) {
          <input type="text" pInputText class="custom-column-filter"
            (input)="applyColumnFilter($event, col.id+'_filter', 'contains')" (click)="$event.stopPropagation()"
            style="width: 100% !important; max-width: 100% !important; min-width: 0 !important; box-sizing: border-box !important;">
          }
        </th>
        }
        </tr>
    </ng-template>

    <ng-template pTemplate="body" let-rowData let-columns="columns">
      <tr class="elegant-row" style="width: 10px;">
        @for(col of columns; track col.id){
        <td tooltipPosition="top" class="elegant-cell"
          [class.clickable-cell]="isCellClickable(col, rowData)"
          (click)="handleCellClick(col, rowData, $event, getCellValue(rowData, col.field))">
          <div class="cell-content" [innerHTML]="getCellDisplayValue(rowData, col)"></div>
        </td>
        }
      </tr>
    </ng-template>

    <ng-template pTemplate="emptymessage" let-columns>
      <tr>
        <td [attr.colspan]="columns.length" class="empty-state">
          <div class="empty-content">
            <i class="pi pi-info-circle"></i>
            <p>No records found</p>
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
